(( define "header" ))
<html>

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>chop-1 | sample maker</title>
        <style>
            /* some basic styling to make things pretty */
      *,
      *:before,
      *:after {
          box-sizing: border-box;
          padding: 0;
          margin: 0;
      }
    
      body {
          background: #0077b6;
          color: white;
          padding-top: 1em;
          padding-bottom: 2em;
      }
    
      .mw30 {
          box-sizing: border-box;
          max-width: 40em;
          margin: auto;
          border: 0 none;
      }
    
      legend {
          font-size: 1.2em;
          width: 100%;
          border-bottom: 1px dotted #99c;
      }
    
      fieldset div {
          margin: 4px 0;
      }
    
      input,
      textarea,
      select {
          font-size: 1em;
      }
    
      /* flexbox styles */
      fieldset div {
          display: flex;
          align-items: center;
      }
    
      label {
          order: 1;
          width: 10em;
          text-align: right;
          padding-right: 0.5em;
          white-space: nowrap;
          user-select: none;
          cursor: pointer;
      }
    
      div,
      button,
      input,
      textarea,
      select {
          order: 2;
          flex: 1 1 auto;
      }
    
      input[type="checkbox"],
      input[type="radio"] {
          order: 1;
          flex: none;
          width: auto;
          margin-left: 10em;
          margin-right: -10em;
      }
    
      input[type="checkbox"]~label,
      input[type="radio"]~label {
          width: auto;
          text-align: left;
          padding-left: 0.4em;
      }
    
      /* label state styles */
      input:focus~label,
      textarea:focus~label,
      select:focus~label {
          color: #FAFAD2;
      }
    
      input:checked~label {
          font-weight: bold;
      }
    
      #app {
          padding-top: 3em;
          padding-left: 0.5em;
          padding-right: 0.5em;
      }
    
      .button {
          max-width: 100%;
          padding: 0.5em;
      }
    
      .error {
          color: #FFDAB9;
      }
    
      .success {
          color: #98FB98;
      }
    
      .current {
        color: #98FB98;
        font-weight: 900;
        font-size: 150%;
      }
    
      .pt1 {
          padding-top: 1em;
      }
    
      .pt3 {
          padding-top: 3em;
      }
    
    
      .pt2{
          padding-top: 2em;
      }
    
      .pt05 {
          padding-top: 0.5em;
      }
    
      dl {
          padding: 0.1em;
      }
    
      dt {
          float: left;
          clear: left;
          text-align: right;
          font-weight: bold;
          color: #20B2AA;
          padding-left: 1em;
      }
    
      li > a {
          color: #20B2AA;
          font-size: 80%;
          padding-left: 1em;
      }
    
      ul {
           list-style-type: none;
      }
    
      dt::after {
          content: ":";
          padding-right: 0.5em;
      }
    
      dd {}
    
      input,
      button,
      body,
      p {
          font-family: "Lucida Console", Monaco, monospace
      }
    
      .link {
          cursor: pointer;
          text-decoration: underline;
      }
    
      input,
      button {
          background: #0077b6;
          border: 1px solid white;
          border-radius: 4px;
          color: white;
          padding: 0.5em;
      }
    
      button {
          cursor: pointer;
      }
    
      button:hover {
          background-color: white;
          /* Green */
          color: #0077b6;
      }
    
      input:focus {
          background-color: white;
          /* Green */
          color: #0077b6;
      }
    
      a {
          color: white;
      }
    
      a:hover {
          color: #FAFAD2;
      }
    
      dd,
      dt {
          font-size: 80%;
      }   
    
      .video {
        margin: 0 auto;
        border: 5px outset #ddd;
        border-radius: 8px;
        padding: 0.5em;
    }
    
    .beatnum {
        padding-right: 1em;
    }

    img {
        max-width: 100%;
    }
    input {
  min-width: 60%;
  max-width:4em;
  overflow: hidden;
    }
    </style>
    </head>
    
    <body style="">
        <div id="app">
            <fieldset class="mw30">
                <legend>
                    <pre style="float:right; text-align: right;">

   </pre><a href="/"><span style="font-size:1.5em">ch<strong style="font-size: 1.1em;">op-1</strong></span></a>
                </legend>
                <form action="/patch" method="get">
                <div>
                    <input id="audioURL" name="audioURL" type="text" value="((if .Metadata))((.Metadata.OriginalURL))((end))"/>
                    <label for="audioURL">url:</label>
                </div>
                <div>
                    <input type="decimal" id="secondsStart" name="secondsStart" value="((if .Metadata))((.Metadata.Start))((end))" style="min-width: 30%;">
                    <input type="decimal" id="secondsEnd" name="secondsEnd" value="((if .Metadata))((.Metadata.Stop))((end))" style="min-width: 30%;">
                    <label for="secondsStart">start/end<br>(in seconds):</label>
                </div>
                <!-- <div>
                            <input id="removeSilence" name="removeSilence" type="checkbox" />
                            <label for="removeSilence">checkbox</label>
                </div> -->
                <div>
                    <button class="button" type="submit" style="max-width:4em;  min-width: 60%;">chop it up!</button>
                    <label for="name"></label>
                </div>
            </form>
            </fieldset>
            <div class="mw30">
                (( with .MessageError ))
                <div style="text-align: center;">
                    <p  class="error" style="text-transform: lowercase;">
                        ((.))
                    </p>
                    <p>
                      problem? click <a href="https://github.com/schollz/teoperator/issues/new">here to send a bug report</a>.
</p>
                </div>
                (( end ))

   
                (( if .Metadata.UUID ))
                <div class="pt1">
                    <p>generated from '<a href="(($.Metadata.OriginalURL))">((urlbase $.Metadata.Name ))</a>'</p>
                    <br>
                    <p>click on a waveform to listen to it and download the op-1 drum patch. the varying colors indicate how the op-1 marks are generated.
                    </p>
                </div>
                 <div style="padding:1em; border: 2px solid #FFFFFF; margin-top:2em;">
                (( range .Metadata.Files))
                 
                <div class="pt1">
                <p  style="display:none;" id="p((filebase .Prefix))">
                  <a href="((.Prefix)).aif" download>((filebase .Prefix)).aif</a>: ((roundfloat .Start)) to ((roundfloat .Stop)) seconds</p>
                <p>
                <img src="((.Prefix)).mp3.png" class="waveform" id="((filebase .Prefix))">
                </p>
                <p  style="display:none;" id="a((filebase .Prefix))">
                <audio controls id="audio((filebase .Prefix))">
                    <source src="/((.Prefix)).mp3" type="audio/mp3" />
                        Your browser does not support the audio tag.
                </audio>
                </p>
                </div>
                ((end))
              </div>

                ((else))

                <div>
                    <p class="pt2">
                        chop up an internet sound to load easily into the op-1 drum sounds. 
                    </p>
                    <p class="pt1">
                        the url you enter will be chopped up into 12 second samples, with markings put in where silence is detected.
                    </p>
                    <p class="pt1">
                        to get started, enter a url from youtube or somewhere else on the web.
                        if you need to upload something, <a href="https://share.schollz.com">use another website</a>  to upload first.
                    </p>
                    <p class="pt1">
<strong>examples:</strong> <a href="https://op1.schollz.com/patch?audioURL=https%3A%2F%2Fcdn.loc.gov%2Fservice%2Fgdc%2Fgdcarpl%2Fgdcarpl-1624415%2F1624415.mp3&secondsStart=982&secondsEnd=1002">poetry from library of congress</a>, <a href="https://op1.schollz.com/patch?audioURL=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2F6%2F68%2FTurdus_merula_male_song_at_dawn%252820s%2529.ogg&secondsStart=0&secondsEnd=30">black bird sounds</a>, <a href="https://op1.schollz.com/patch?audioURL=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2F7%2F70%2FTimpani_64-c-p5.wav&secondsStart=0&secondsEnd=0">sounds from a timpani</a>. <a href="https://op1.schollz.com/patch?audioURL=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D36CYMdFmDeQ&secondsStart=21.9&secondsEnd=60">spoken word from youtube.com</a>.
                    </p>

                    <p class="pt1" style="text-transform: lowercase;">
                        please note: <small>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</small>
                    </p>
                </div>

                ((end))


                (( end ))
                (( define "footer" ))
                <div class="pt3" style="text-align: right;">
                    <small>Made <a href="https://github.com/schollz/teoperator">open-source by @schollz</a>.</small>
                </div>
            </div>
        </div>

<script src="/static/js/jquery.min.js"></script>

<script>
  $(document).ready(function(){
   $('.waveform').click(
       function(e){
        console.log(e.currentTarget.id);
        $( "#p" +e.currentTarget.id).toggle();
        $( "#a" +e.currentTarget.id).toggle();
        console.log($( "#audio" +e.currentTarget.id).prop("paused"))
        if ($( "#audio" +e.currentTarget.id).prop("paused") == true) {
        $( "#audio" +e.currentTarget.id).trigger('play');
        } else {
        $( "#audio" +e.currentTarget.id).trigger('pause');
        }
       },
   );
});

</script>
    </body>
    
</html>
((end ))